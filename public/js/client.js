"use strict";var google=google,markers=[],googleMap=googleMap||{};googleMap.addInfoWindowForCamera=function(o,e){var a=this;google.maps.event.addListener(e,"click",function(){"undefined"!=typeof a.infoWindow&&a.infoWindow.close(),console.log("clicked"),a.infoWindow=new google.maps.InfoWindow({content:'<img src="http://www.tfl.gov.uk/tfl/livetravelnews/trafficcams/cctv/'+o.file+'"><p>'+o.location+"</p>"}),a.infoWindow.open(a.map,e)})},googleMap.createMarkerForCamera=function(o,e){var a=new google.maps.LatLng(e.lat,e.lng),g=new google.maps.Marker({position:a,map:this.map});markers.push(g),this.addInfoWindowForCamera(e,g)},googleMap.loopThroughCameras=function(o){$.each(o.cameras,function(o,e){googleMap.createMarkerForCamera(o,e)});new MarkerClusterer(googleMap.map,markers,{imagePath:"../images/m"})},googleMap.getCameras=function(){$.get("http://localhost:3000/cameras").done(this.loopThroughCameras)},googleMap.mapSetup=function(){var o=document.getElementById("map-canvas"),e={zoom:12,center:new google.maps.LatLng(51.506178,(-.088369)),mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(o,e),this.getCameras()},$(googleMap.mapSetup.bind(googleMap));